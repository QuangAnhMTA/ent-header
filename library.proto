syntax = "proto3";

package library;
option go_package = "github.com/QuangAnhMTA/ent-header/library";
import "transaction.proto";


service LibraryService {
	// ---------------- Course -----------------
  rpc ListCourses(CourseRequest) returns (Courses);
  rpc ListDocument(DocumentRequest) returns (Documents);
  rpc ListParagraph(ParagraphRequest) returns (Paragraphs);
  rpc GetDataSearchEngine(SearchEngineRequest) returns(SearchEngines);
  rpc ListSentence(SentenceRequest) returns (Sentences);
  rpc StartLearnListen(SentenceRequest) returns (Sentences);
  rpc EndLearnListen(Listen) returns (Listen);
  rpc GetPos(PosRequest) returns (Pos);
  rpc ApproveParagraph(Paragraph) returns (Paragraph);
}


message Listen {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 member_id = 2;
  int64 sentence_id =3;
  int64 paragraph_id = 4;
  int64 document_id = 5;
  int64 created_time = 6;
}


message CourseRequest {
  int64 id = 1;
  int64 account_id = 2;
  string title = 3;
  string image = 4;
  int32 type = 5;
  int32 subject = 6;
  int32 status = 7;
  repeated int64 course_ids = 9;
  repeated string preload = 10;
  int32 limit =11;
  int32 offset = 12;
  repeated string cols = 13;
  repeated string includes =14;
}

message Course {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 account_id = 2;
  string title = 3;
  string image = 4;
  int32 type = 5;
  int32 subject = 6;
  Status status = 7;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  // `gorm:"-"`
  repeated Document documents = 8;
}

message Courses {
  repeated Course courses = 1;
  int64 total = 2;
}


message DocumentRequest {
  int64 id = 1;
  int64 course_id = 2;
  string title = 3;
  string image = 4;
  string content = 5;
  int32 status = 6;
  repeated string preload = 7;
  repeated int64 course_ids = 8;
  int32 limit =9;
  int32 offset = 10;
  repeated string cols = 11;
  repeated string includes =12;
  int64 current_id = 14;

}

message Document {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 course_id = 2;
  string title = 3;
  string image = 4;
  string content = 5;
  Status status = 6;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  // `gorm:"-"`
  repeated Paragraph paragraphs = 8;
  
}

message Documents {
  repeated Document documents = 1 ;
  int64 total = 2;
  int64 docment_current_id = 3;
  int64 paragraph_current_id = 4;
  int64 sentence_current_id = 5;
}

message ParagraphRequest {
  int64 id = 1;
  int64 document_id = 2;
  int32 type = 3;
  int32 position = 4;
  int32 status = 5;
  int32 limit =9;
  int32 offset = 10;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 document_ids = 13;
  int64 current_id = 14;

}

message Paragraph {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 approve_id = 2;
  int64 account_id = 3;
  int64 generation_id = 4;
  int64 member_id = 5;
  int64 course_id = 6;
  int64 document_id = 7;
  string title = 8;
  string image = 9;
  Type type = 10; //1. Đoạn văn thường, 2. Hội thoại, 3. Quiz, 4. Ảnh
  enum Type {
    default_type = 0;
    normal_paragraph = 1;
    conversation = 2;
    quiz = 3;
    image_paragraph = 4;
  }
  int32 position = 11;
  // `gorm:"text"`
  string keywords = 12;
  int32 indexed = 13;
  Approved approved= 14; // Duyệt nội dung / 1: Chưa, 2: Đã duyệt
  enum Approved {
    default_approved = 0;
    not_approved = 1 ;
    yes_approved = 2;
    again_approved= 3;
  }
  Status status = 15;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  ProcessAudio process_audio = 16; // Process audio / 1: Chưa xử lý, 2: Đã gửi job tạo audio, 3: Đã tạo xong audio
  enum ProcessAudio {
    default_process_audio = 0;
    no_process = 1;
    processing = 2;
    done =3;
  }
  int32 process_translat = 17;
  int64 created_at = 18;
  // int64 updated_at = 19;
  // `gorm:"-"`
  repeated Sentence sentences = 21; 
  
}

message Paragraphs {
  repeated Paragraph paragraphs = 1;
  int64 current_id = 3;
  int64 total = 2;
}

message SentenceRequest {
  int64 id = 1;
  int64 course_id = 2;
  int64 document_id = 3;
  int64 paragraph_id = 4;
  int64 character_id = 5;
  int64 voice_id = 6;
  string content = 7;
  string translate_google = 8;
  string translate_editor = 9;
  string keywords = 10;
  string words = 11;
  int32 process_voice = 12;
  int32 status = 13;
  int32 limit =14;
  int32 offset = 15;
  repeated string cols = 16;
  repeated string includes =17;
  repeated int64 ids = 18;
  repeated int64 character_ids = 19;
  int64 current_id = 20;
}

message Sentence {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 course_id = 2;
  int64 document_id = 3;
  int64 paragraph_id = 4;
  int64 character_id = 5;
  string content = 7;
  string keywords = 10;
  string words = 11;
  int32 process_audio = 12;
  int32 process_content = 9;
  Status status = 13;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  // `gorm:"-"`
  repeated Audio audios = 15;
  // `gorm:"-"`
  Translation translation = 16;
  // `gorm:"-"`
  transaction.Speak speak = 17;
  float score = 18;
  string color = 19;
}

message Sentences {
  repeated Sentence sentences = 1;
  int64 total = 2;
  repeated Character characters = 6;
  int64 docment_current_id = 3;
  int64 paragraph_current_id = 4;
  int64 sentence_current_id = 5;
}

message AudioRequest {
  int64 id = 1;
  int64 sentence_id = 2;
  int64 voice_id = 3;
  string transcription_id = 4;
  int64 accent_id = 5;
  string title = 6;
  string language = 7;
  int32 gender = 8;
  float duration = 9;
  string url = 10;
  int64 length = 11;
  int64 count = 12;
  int32 process = 13;
  int64 created = 14;
  int32 status = 15;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;
  repeated int64 sentence_ids = 20;

}

message Audio {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 sentence_id = 2;
  int64 voice_id = 3;
  string transcription_id = 4;
  int32 speed = 5;
  float duration = 9;
  string url = 10;
  int64 size = 11;
  int32 process = 13;
  int64 created_at = 14;
  Status status = 15;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  string keyx = 16;
  string format = 17;

}

message Audios {
  repeated Audio audios = 1;
  int64 total = 2;
}




message CourseTagRequest {
  int64 id = 1;
  int64 course_id = 2;
  int64 tag_id = 3;
  int32 status = 4;
}

message CourseTag {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 course_id = 2;
  int64 tag_id = 3;
  int32 status = 4;
}

message CourseTags {
  repeated CourseTag courseTags = 1;
  int64 total = 2;
}


message SearchEngine {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  string item = 2;
  int64 object_id = 3;
  string title = 4;
  string content = 5;
  Status status = 6;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  int64 created = 7;
  // `gorm:"-"`
  repeated Course courses = 8;
  // `gorm:"-"`
  repeated Document documents = 9;
  // `gorm:"-"`
  repeated Paragraph paragraphs = 10;

}

message SearchEngineRequest {
  int64 id = 1;
  string item = 2;
  int64 object_id = 3;
  string title = 4;
  string content = 5;
  int32 status = 6;  
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;
}

message SearchEngines{
  int32 total = 1;
  repeated SearchEngine search_engines = 2;
}


message SentencePos {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 sentence_id = 2;
  string word = 3;
  string lemma = 4;
  string pos = 5;
  string pos_group =6;
  int32 position =7;
  Status status = 8;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
}

message SentencePosRequest {
  int64 id = 1;
  int64 sentence_id = 2;
  string word = 3;
  string lemma = 4;
  string pos = 5;
  string pos_group =6;
  int32 position =7;
  int32 status = 8;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;
}

message SentencePoses {
  int32 total = 1;
  repeated SentencePos sentence_poses = 2;
}

message Mean {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id =1 ;
  int64 word_id = 2;
  string pos = 3;
  string pos_group = 4;
  string pos_manual =5;
  string pos_ti = 6;
  string pos_full =7;
  string lemma = 8;
  string word = 9;
  string level = 10;
  string gram = 11;
  string usage = 12;
  string guideword = 13;
  string phonetic = 14;
  string translate = 15;
  string definition = 16;
  string definition_vi = 17;
  int32 review = 18;
  int32 process_translat = 19;
  int32 process_pos = 20;
  Status status = 21;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
}

message MeanRequest {
  int64 id =1 ;
  int64 word_id = 2;
  string pos = 3;
  string pos_group = 4;
  string pos_manual =5;
  string pos_ti = 6;
  string pos_full =7;
  string lemma = 8;
  string word = 9;
  string level = 10;
  string gram = 11;
  string usage = 12;
  string guideword = 13;
  string phonetic = 14;
  string translate = 15;
  string definition = 16;
  string definition_vi = 17;
  int32 review = 18;
  int32 process_translat = 19;
  int32 process_pos = 20;
  int32 status = 21; 
  int32 limit =22;
  int32 offset = 23;
  repeated string cols = 24;
  repeated string includes =25;
}

message Means {
  int32 total = 1;
  repeated Mean means = 2;
}



message Pos {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  string tag_bc = 2;
  string tag_un = 3;
  string tag_ti = 4;
  string title_en = 5;
  string title = 6;
  int64 process = 7;
  // `gorm:"-"`
  repeated Mean means = 8;
}

message PosRequest {
  int64 id = 1;
  string tag_bc = 2;
  string tag_un = 3;
  string tag_ti = 4;
  string title_en = 5;
  string title = 6;
  int64 process = 7;
  int32 status = 8;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;
  int64 sentence_id = 20;
  string word = 21;
  int32 position =22;
}

message Poses {
  int32 total = 1;
  repeated Pos poses = 2;
}

message Translation {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  string item = 2;
  int64 object_id = 3;
  string content = 4;
  string translate_editor = 5;
  string translate_google = 6;
  string lang_from = 7;
  string lang_to = 8;
  int32 process = 9;
  Status status = 10;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
}
message Translations {
  int32 total = 1;
  repeated Translation translations =2;
}

message TranslationRequest {
  int64 id = 1;
  string item = 2;
  int64 object_id = 3;
  string content = 4;
  string translate_editor = 5;
  string translate_google = 6;
  string lang_from = 7;
  string lang_to = 8;
  int32 process = 9;
  int32 status = 10; 
  repeated int64 ids = 11; 
  repeated int64 object_ids = 12;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;

}

message Character {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  int64 create_id = 2;
  int64 course_id = 3;
  int64 document_id = 4;
  int64 paragraph_id = 5;
  int64 voice_id = 6;
  string fullname = 7;
  string gender =8;
  int32 age = 9;
  int32 accent = 10;
  string avatar = 11;
  string description = 12;
  int64 created_at = 13;
  Status status = 14;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  int64 sentence_current_id = 15;
}

message CharacterRequest {
  int64 id = 1;
  int64 create_id = 2;
  int64 course_id = 3;
  int64 document_id = 4;
  int64 paragraph_id = 5;
  int64 voice_id = 6;
  string fullname = 7;
  string gender =8;
  int32 age = 9;
  int32 accent = 10;
  string avatar = 11;
  string description = 12;
  int64 created_at = 13;
  int32 status = 14;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;  
  repeated int64 ids = 20; 
}

message Characters {
  int32 total = 1;
  repeated Character characters =2;
}