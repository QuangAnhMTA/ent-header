syntax = "proto3";

package config;
option go_package = "github.com/QuangAnhMTA/ent-header/config";


service ConfigService {
	// ---------------- authentication-----------------

   rpc CheckRegisterAccount(CheckRegisterAccountRequest) returns (CheckRegisterAccountResponse);
   rpc VerifyOtpRegister(VerifyOtpRegisterRequest) returns (VerifyOtpRegisterResponse);
   rpc RegisterAccount(RegisterAccountRequest) returns (Account);
   rpc Login(LoginAccountRequest) returns (LoginAccountResponse);
   rpc MemberLogin(MemberRequest) returns (LoginMemberResponse);
   rpc ChangeMemberPassword(Member) returns (Member);

    // -----------------account------------------------

   rpc ListAccounts(AccountRequest) returns (Accounts);
   rpc UpdateAccount(AccountRequest) returns (Account);
     // -----------------member------------------------
   rpc ListMembers(MemberRequest) returns (Members);
    //
   rpc CreateMember(Member) returns (Member);
   rpc GetMember(Member) returns(Member);
    // ------------------category----------------------
   rpc ListCategories(CategoryRequest) returns (Categories);

   rpc CreateMemberCategory (MemberCategory) returns (MemberCategory);
   rpc GetMemberCategory(MemberCategory) returns(MemberCategory);
   rpc ListMemberCategories(MemberCategoryRequest) returns (MemberCategories);
   rpc ListMemberPractice(MemberPracticeRequest) returns (MemberPractices);
   rpc CreateMemberPractice(MemberPractice) returns (MemberPractice);
   rpc ListGroup(GroupRequest) returns (Groups);
   rpc ListMemberGroup(MemberGroupRequest) returns (MemberGroups);
} 

message Claims {
	int64 acount_id = 1;
	string device_id = 2;
  int64 member_id = 3;
}

message AccountRequest {
  int64 id = 1;
  int64 role_id = 2;
  string fullname = 3;
  string avatar = 4;
  string phone = 5;
  string password = 6;
  int64 created_at = 7;
  int32 status = 8;
  repeated int64 ids = 13;
  int32 limit =9;
  int32 offset = 10;
  repeated string cols = 11;
  repeated string includes =12;

}

message Account {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1;
  string fullname = 3;
  string avatar = 4;
  string phone = 5;
  string password = 6;
  int64 created_at = 7;
  Status status = 8;  
  enum Status {
      default_state = 0;
      deactive = 1;
      active = 2;
  }
  int64 role_id = 9;
  // `gorm:"-"`
  Role role = 10;
}

message Accounts {
  repeated Account accounts = 1;
  int64 total = 2;
}



message CheckRegisterAccountRequest {
    string phone = 1;
    string device_id = 2;
  }
  
  message CheckRegisterAccountResponse {
    string phone = 1;
    string device_id = 2;
  }
  
  message VerifyOtpRegisterRequest {
    string phone = 1;
    string device_id = 2;
    string otp = 3;
  }
  message VerifyOtpRegisterResponse {
    string token = 1;
    string device_id = 2;
  }


message RegisterAccountRequest {
    string token = 1;
    string password = 2;
    string device_id = 3;
    string fullname = 4;
}
message RegisterAccountResponse {
    string token = 1;
    string password = 2;
    string device_id = 3;
}

  message LoginAccountRequest {
    string phone = 1;
    string password = 2;
    string device_id = 3;
  }
  
  
  message LoginAccountResponse {
   string account_token = 1;
   string member_token = 2;
   Claims claim = 3;
   Account account = 4;
   repeated Member members = 5;
   string device_id = 6;
  }

  message LoginMemberResponse {
    string account_token = 1;
    string member_token = 2;
    Claims claim = 3;
    Account account = 4;
    Member member = 5;
    string device_id = 6;
   }
   
  
  message AccessToken {
    int64 account_id = 1;
    int64 role_id = 2;
    Claims claims = 3;
  }

  message MemberRequest {
    int64 id = 1;
    int64 account_id = 2;
    string fullname = 3;
    string avatar = 4;
    string password = 5;
    int64 created_at = 6;
    int32 status = 7;
    string token = 8;
  }
  
  message Member {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1;
    int64 account_id = 2;
    string fullname = 3;
    string avatar = 4;
    string password = 5;
    int64 created_at = 6;
    int32 is_main = 7;
    int32 is_onboard = 8;
    // `gorm:"text"`
    string data =9;
    Status status = 10;  
    enum Status {
		    default_state = 0;
		    deactive = 1;
		    active = 2;
	  }
    string token = 11;
    string nickname = 12;
}
  
  message Members {
    repeated Member members = 1;
    int64 total = 2;
  }


  message Category {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1;
    int64 parent_id = 2;
    string title = 3;
    string title_vi = 11;
    string keyx = 4;
    string valuex = 5;
    int64 position = 6;
    // `gorm:"text"`
    string description = 7;
    Status status = 8;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	  }
    string icon = 9;
    // `gorm:"-"`
    IsFavourite is_favourite = 10;
    enum IsFavourite {
      default_is_favourite = 0;
      no = 1;
      yes = 2;
    }
  }

  message CategoryRequest {
    int64 id = 1;
    int64 parent_id = 2;
    string title = 3;
    string keyx = 4;
    string valuex = 5;
    int64 position = 6;
    string description = 7;
    int32 status = 8;
    int32 limit =9;
    int32 offset = 10;
    repeated string cols = 11;
    repeated string includes =12;
    repeated int64 parent_ids  = 14;
  }

  message Categories {
    int32 total = 1;
    repeated Category categories = 2;
  }


message Role {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1;
    // `gorm:"text"`
    string title = 2;
    int64 position = 3;
    // `gorm:"-"`
    Accesses accesses =4;
    // `gorm:"-"`
    map<string, string>  list_access =5; 
}

message Roles {
  int32 total = 1;
  repeated Role roles = 2;
}
message RoleRequest {
  int64 id = 1;
  string title = 2;
  int64 position = 3;
  int32 limit =9;
  int32 offset = 10;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 parent_ids  = 14;
}
message Access {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 role_id = 2;
    string domain = 3;
    string page =4;
    string action =5;
    string description = 7;
    Status status = 8;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	}
}

message AccessRequest {
  int64 id = 1; 
  int64 role_id = 2;
  string domain = 3;
  string page =4;
  string action =5;
  string description = 7;
  int32 status = 8; 
  int32 limit =9;
  int32 offset = 10;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 parent_ids  = 14;
}

message Accesses {
  int32 total = 1;
  repeated Access accesses = 2;
}




message MemberCategory {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 category_id = 2;
    int64 member_id = 3;
    string valuex = 4;
    int64 created_at = 5;
    int64 updated_at = 6;
    Status status = 7;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	  }
}

message MemberCategoryRequest {
  int64 id = 1; 
  int64 category_id = 2;
  int64 member_id = 3;
  string valuex = 4;
  int64 created_at = 5;
  int64 updated_at = 6;
  int32 status = 7;  
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 parent_ids  = 14;
  repeated int64 category_ids = 15;
  repeated int64 member_ids = 16;

}

message MemberCategories {
  int32 total = 1;
  repeated MemberCategory member_categories = 2;
}


message Group {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 parent_id = 2;
    string title = 3;
    string address = 4;
    int64 city_id = 5;
    int64 district_id = 6;
    int64 ward_id = 7;
    Status status = 8;  
    enum Status {
		  default_status = 0;
		  deactive = 1;
		  active = 2;
	  }
    Type type =10 ;  
    enum Type {
		  default_type = 0;	
		  school = 1;
		  center = 2;
      small = 3;
	}
    // `gorm:"-"`
    repeated AccountGroup account_groups = 9;
}

message GroupRequest {
  int64 id = 1; 
  int64 parent_id = 2;
  string title = 3;
  string address = 4;
  int64 city_id = 5;
  int64 district_id = 6;
  int64 ward_id = 7;
  int32 status = 8;  
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
}
message Groups {
  int32 total = 1;
  repeated Group groups =2;
}



message AccountGroup {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 group_id = 2;
    int64 account_id = 3;
    int64 role_id = 4;
    int64 created_at = 5;
    Status status = 8;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	  }
    // `gorm:"-"`
    Account account = 9;
}

message AccountGroupRequest {
  int64 id = 1; 
  int64 group_id = 2;
  int64 account_id = 3;
  int64 role_id = 4;
  int64 created_at = 5;
  int32 status = 8; 
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 group_ids = 14;

}
message AccountGroups {
  int32 total = 1;
  repeated AccountGroup account_groups =2;
}


message MemberGroup {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 group_id = 2;
    int64 member_id = 3;
    int64 created_at = 5;
    Status status = 8;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	  }
}

message MemberGroupRequest {
    int64 id = 1; 
    int64 group_id = 2;
    int64 member_id = 3;
    int64 created_at = 5;
    int32 status = 8;  
    int32 limit =9;
    int32 offset = 10;
    repeated int64 ids = 13;
    repeated string cols = 11;
    repeated string includes =12;
}  

message MemberGroups {
  repeated MemberGroup member_groups =2;
}


message Token {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 category_id = 2;
    string title = 3;
    string image = 4;
    string image_other = 5;
    string unit = 6;
    int64 property = 7;
    int64 max = 8;
    string description =9;
    Status status = 10;  
    enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	  }
}

message TokenRequest {
  int64 id = 1; 
  int64 category_id = 2;
  string title = 3;
  string image = 4;
  string image_other = 5;
  string unit = 6;
  int64 property = 7;
  int64 max = 8;
  string description =14;
  int32 status = 15; 
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
}

message Tokens {
  repeated Token tokens =2;
}

message AccountToken {
  // `gorm:"primaryKey;not null;autoIncrement"`
  int64 id = 1; 
  int64 account_id = 2;  
  int64 token_id = 3;
  int64 quantity = 4;
  string hash = 5;
}

message AccountTokenRequest {
  int64 id = 1; 
  int64 account_id = 2;  
  int64 token_id = 3;
  int64 quantity = 4;
  string hash = 5;
  int32 status = 15; 
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 account_ids = 14;
}

message AccountTokens {
  repeated AccountToken account_tokens = 1;
  int32 total = 2;
}

message MemberToken {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 member_id = 2;  
    int64 token_id = 3;
    int64 quantity = 4;
    string hash = 5;
}

message MemberTokenRequest {
  int64 id = 1; 
  int64 member_id = 2;  
  int64 token_id = 3;
  int64 quantity = 4;
  string hash = 5;
  int32 status = 15; 
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 account_ids = 14;
}

message MemberPractice {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1;  
    int64 question_id = 2;
    int64 member_id = 3;
    int64 created_at = 4;
    int64 updated_at = 5;
}

message MemberPracticeRequest {
  int64 id = 1;  
  int64 question_id = 2;
  int64 member_id = 3;
  int64 created_at = 4;
  int64 updated_at = 5;
  int32 limit =9;
  int32 offset = 10;
  repeated int64 ids = 13;
  repeated string cols = 11;
  repeated string includes =12;
  repeated int64 account_ids = 14;
  repeated int64 question_ids = 15;
  repeated int64 member_ids = 16;

}

message MemberPractices {
  repeated MemberPractice member_practices = 1;
  int32 total = 2;
}




