syntax = "proto3";

package transaction;
option go_package = "github.com/QuangAnhMTA/ent-header/transaction";

import "library.proto";
import "config.proto";


service TransactionService {
	// ---------------- Course -----------------
  rpc ListListen(ListenRequest) returns (Listen);
  rpc EndLearnListen(Listen) returns (Listen);
  rpc ListSpeak(SpeakRequest) returns (Speaks);
  rpc EndLearnSpeak(Speak) returns (Speak);
  rpc CreateSentence(Sentence) returns (Sentence);
  rpc CreateLookup(Lookup) returns (Lookup);
  rpc CreateParagraph(Paragraph) returns (Paragraph);
  rpc CompleteParagraph(Paragraph) returns (Paragraph);
  rpc ListLookup(LookupRequest) returns (Lookups);
  rpc ListSentence(SentenceRequest) returns (Sentences);
  rpc GetParagraphMax(ParagraphRequest) returns (Paragraph);
  rpc ListParagraph(ParagraphRequest) returns (Paragraphs);
  rpc ListListenDisplay(ListenDisplayRequest) returns (ListenDisplays);
  rpc ListSpeakDisplay(SpeakDisplayRequest) returns (SpeakDisplays);
  rpc ListFavourite(FavouriteRequest) returns (Favourites);
  rpc CreateFavourite(Favourite) returns (Favourite);
  rpc DeleteFavourite(Favourite) returns (Favourite);
  rpc StartParagraph(Paragraph) returns (Paragraph);
  rpc ListNewDetail(NewDetailRequest) returns(NewDetails);
  rpc ListNew(NewRequest) returns(News);
  rpc StartLearn(Learn) returns (Learn);
  rpc EndLearn(Learn) returns(Learn);
  rpc CreateMemberAnswer(Answer) returns(Answer);
  rpc UpdateMemberAnswer(Answer) returns(Answer);
  rpc ListMemberAnswer(AnswerRequest) returns(Answers);
  rpc CreateAnswers(Answers) returns(Answers);
  rpc ListReportToken(ReportTokenRequest) returns(ReportTokens);
  rpc ListReportPoint(ReportPointRequest) returns(ReportPoints);
  rpc ListReportMember(ReportMemberRequest) returns(ReportMembers);
  rpc CreateRecommend (AnswerRequest) returns (Answers);
}

message Listen {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 document_id = 5;
	int64 created_at = 6;
	// `gorm:"-"`
	repeated int64 sentence_ids =20;
	string member_exercise_token = 15;
  }
  message ListenRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;	
	int64 paragraph_id = 4;
	int64 document_id = 5;
	int64 created_at = 6;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	string member_exercise_token = 15;

  }

message Speak {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 character_id = 5;
	int64 created_at = 6;
	float score = 7;
	string hash = 8;
	string keyx = 9;
	string format = 10;
	// `gorm:"-"`
	string color = 11;
	string content = 12;
	// `gorm:"-"`
	config.Member member = 13;
	// `gorm:"-"`
	library.Paragraph paragraph = 14;
	string member_exercise_token = 15;
	// `gorm:"-"`
	string url = 16;
	string template = 24;
	// `gorm:"-"`
	repeated SpeakDetail speak_details = 25;
}

message Speaks {
	repeated Speak speaks = 1;
	config.Member member = 3;
	library.Paragraph paragraph = 4;
	int64 total = 2;
}


message SpeakRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 character_id = 5;
	int64 created_at = 6;
	float score = 7;
	string hash = 8;
	string keyx = 9;
	string format = 10;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	repeated int64 sentence_ids = 20;
	repeated int64 character_ids = 21;
	int64 current_id = 22;
	repeated int64 ids = 23;
	string member_exercise_token = 15;
	string template = 24;

}

message SpeakDetail {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 speak_id = 4;
	string word = 5;
	float probability = 6;
	float start = 7;
	float end = 8;
	int64 created_at = 9;
}
message SpeakDetailRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 speak_id = 4;
	string word = 5;
	float probability = 6;
	float start = 7;
	float end = 8;
	int64 created_at = 9;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	repeated int64 sentence_ids = 20;
}
message SpeakDetails {
	repeated SpeakDetail speak_details = 1;
	int32 total = 2;
}





message Lookup {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 position = 4;
	int64 created_at = 6;
    // `gorm:"-"`
	library.Sentence sentence = 7;
	int64 sentence_pos_id = 8;
    // `gorm:"-"`
	library.SentencePos sentence_pos = 9;
	int64 quantity = 10;
	int64 updated_at = 11;
	string member_exercise_token = 15;
}
message LookupRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 position = 4;
	int64 created_at = 6;
	int64 sentence_pos_id = 8;
	int32 limit =17;
	int32 offset = 18;
	repeated string includes =19;
	repeated int64 ids = 23;
	int64 quantity = 10;
	int64 updated_at = 11;
	string member_exercise_token = 15;

}
message Lookups {
	repeated Lookup lookups = 1;
	int64 total = 2;
}


message Sentence {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id = 3;
	int64 created_at = 4;
	// `gorm:"-"`
	library.Sentence sentence = 7;
	int64 quantity = 8;
	int64 updated_at = 5;
	int64 paragraph_id = 9;
}
message SentenceRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id = 3;
	int64 created_at = 4;
	int32 limit =17;
	int32 offset = 18;
	repeated string includes =19;
	repeated int64 ids = 23;
	int64 quantity = 8;
	int64 updated_at = 5;
}
message Sentences {
	repeated Sentence sentences = 1;
	int64 total = 2;
}

message Paragraph {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 course_id =3;
	int64 paragraph_id = 4;
	int64 document_id = 5;
	int64 created_at = 6;
	// `gorm:"-"`
	library.Paragraph paragraph = 7;
	// `gorm:"-"`
	library.Document document = 8;
	// `gorm:"-"`
	library.Course course = 9;
	Process process = 10;
	enum Process {
		default_process = 0;
		processing = 1;
		finish = 2;
	}
	int64 updated_at = 11;
}


message ParagraphRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 course_id =3;
	int64 paragraph_id = 4;
	int64 document_id = 5;
	int64 created_at = 6;
	int32 process = 7;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	int64 updated_at = 11;

}



message Paragraphs {
	repeated Paragraph paragraphs = 1;
	int64 total = 2;
}

message ListenDisplay {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 created_at = 6;
	int64 updated_at = 7;
	string member_exercise_token = 15;

}
message ListenDisplayRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 document_id = 5;
	int64 created_at = 6;
	repeated int64 paragraph_ids = 7;
	repeated int64 ids = 8;
	repeated int64 sentence_ids = 9;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	string member_exercise_token = 15;

}
message ListenDisplays {
	repeated ListenDisplay listen_displays = 1;
	int64 total = 2;
 }
message SpeakDisplay {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 character_id = 5;
	int64 created_at = 6;
	string member_exercise_token = 15;
}
message SpeakDisplayRequest {
	int64 id = 1;
	int64 member_id = 2;
	int64 sentence_id =3;
	int64 paragraph_id = 4;
	int64 character_id = 5;
	int64 created_at = 6;
	repeated int64 character_ids = 7;
	repeated int64 ids = 8;
	repeated int64 sentence_ids = 9;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
	string member_exercise_token = 15;

}
message SpeakDisplays {
	repeated SpeakDisplay speak_displays = 1;
	int64 total = 2;
}




message Favourite {
  	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	string item = 3;
	int64 object_id = 4;
	// `gorm:"-"`
	library.Paragraph paragraph = 7;
	// `gorm:"-"`
	library.Document document = 8;
	// `gorm:"-"`
	library.Course course = 9;
	int64 created_at = 10;
	int64 updated_at = 11;
	Status status = 12;  
    enum Status {
		default_status = 0;
		deactive = 1;
		active = 2;
	  }

}


message FavouriteRequest {
  int64 id = 1;
  int64 member_id = 2;
  string item = 3;
  int64 object_id = 4;
  repeated int64 ids = 5;
  repeated int64 object_ids = 6;
  int32 limit =17;
  int32 offset = 18;
  repeated string cols = 16;
  repeated string includes =19;
  int64 created_at = 10;
  int64 updated_at = 11;
  int32 status = 12;
}


message Favourites {
	repeated Favourite favourites = 1;
	int64 total = 2;
}


message New {
  	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	string item = 3;
	int64 object_id = 4;
	Type type = 5;  
	// 1. Tra câu, 2. Conversation, 3: Essay, 4: Gallery
	enum Type {
	  default_type = 0;
	  look_up = 1;
	  conversation = 2;
	  essay=3;
	  gallery =4;
	}
	int64 created_at = 6;
	int64 updated_at = 7;
	Status status = 8;
	enum Status {
		default_status = 0;
		deactive = 1;
		active = 2;
	}
	// `gorm:"-"`
	library.Paragraph paragraph = 9;
	// `gorm:"-"`
	repeated NewDetail new_details = 10;

}

message NewRequest {
	int64 id = 1;
	int64 member_id = 2;
	string item = 3;
	int64 object_id = 4;
	int32 type = 5;  
	int64 created_at = 6;
	int64 updated_at = 7;
	int32 status = 8;
	repeated int64 ids = 9;
	repeated int64 object_ids = 10;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
}

message News {
	repeated New News = 1;
	int64 total = 2;
}


message NewDetail {
  	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 news_id = 2;
	string object_item = 3;
	int64 object_id = 4;
	int64 created_at = 6;
	int64 updated_at = 7;
	enum Status {
		default_status = 0;
		deactive = 1;
		active = 2;
	}
	Status status = 8;
	// `gorm:"-"`
	library.Sentence sentence = 9;
	// `gorm:"-"`
	New new = 10;
}


message NewDetailRequest {
	int64 id = 1;
	int64 news_id = 2;
	string object_item = 3;
	int64 object_id = 4;
	int64 created_at = 6;
	int64 updated_at = 7;
	int32 status = 8;
	repeated int64 ids = 9;
	repeated int64 object_ids = 10;
	repeated int64 news_ids = 11;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;

}

message NewDetails {
	repeated NewDetail new_details = 1;
	int64 total = 2;
}

message Learn {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 member_id = 2;
	Status status = 3;
	enum Status {
		default_status = 0;
		deactive = 1;
		active = 2;
	}
	Type type = 4;
	enum Type {
		default_type = 0;
		speak = 1;
		listen = 2;
	}
	Process process = 5;
	enum Process {
		default_process = 0;
		processing = 1;
		finish = 2;
	}
	int64 start_at = 6;
	int64 end_at = 7;
}

message LearnRequest {
	int64 id = 1;
	int64 member_id = 2;
	int32 status = 3;
	int32 type = 4;
	int32 process = 5;
	int64 start_at = 6;
	int64 end_at = 7;
	repeated int64 ids = 9;
	int32 limit =17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19;
}
message Learns {
	int32 total = 1;
	repeated Learn learns = 2;
}


message Answer {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1;
	int64 question_id = 2;
	int64 member_id = 3;
	int64 quiz_id = 4;
	int64 answer_id = 5;
	// `gorm:"text"`
	string content = 6;
	int64 duration = 7;
	int32 right = 8;
	string hash = 9;
	int64 created_at = 10;
	int64 updated_at = 11;
	Status status = 13;  
	enum Status {
		default_state = 0;
		deactive = 1;
		active = 2;
	}
  }

  message AnswerRequest {
	int64 id = 1;
	int64 question_id = 2;
	int64 member_id = 3;
	int64 quiz_id = 4;
	int64 answer_id = 5;
	string content = 6;
	int64 duration = 7;
	int32 right = 8;
	string hash = 9;
	int64 created_at = 10;
	int64 updated_at = 11;
	int32 status = 12;
	int32 limit =14;
	int32 offset = 15;
	repeated string cols = 16;
	repeated string includes =17;
	repeated int64 ids = 18;
  }



  message Answers {
	int32 total = 1;
	repeated Answer answers = 2;
  }

message MemberToken {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
    int64 member_id = 2;  
	int64 account_id = 3;
    int64 token_id = 4;
    int64 quantity = 5;
	Type type = 6;  
    enum Type {
		default_type = 0;	
		increase = 1;
		decrease = 2;
	}
	Status status = 7;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
}



message AccountToken {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
	int64 account_id = 3;
    int64 token_id = 4;
    int64 quantity = 5;
	Type type = 6;  
    enum Type {
		default_type = 0;	
		increase = 1;
		decrease = 2;
	}
	Status status = 7;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
}


message ReportMember {
    // `gorm:"primaryKey;not null;autoIncrement"`
    int64 id = 1; 
	string item = 2; // organization or class
    int64 object_id = 3; // id của item
    int64 day = 4; // ngày thứ x của timestamp
	Status status = 5;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
	int64 created_at = 6;
	int64 updated_at = 7;
	int64 amount = 8;
}

message ReportMemberRequest {
	int64 id = 1; 
	string item = 2; // organization, class
    int64 object_id = 3; // id của item
    int64 day = 4; // ngày thứ x của timestamp
	int32 status = 5;  
	int64 created_at = 6;
	int64 updated_at = 7;
	repeated string cols = 16;
	repeated string includes =17;
	repeated int64 ids = 18;
	repeated int64 object_ids = 19;
	int64 start_at = 20;
	int64 end_at = 21;
	int64 start_day = 22;
	int64 end_day = 23;
}


message ReportMembers {
	int64 total = 1;
	repeated ReportMember report_members = 2;
}


message ReportPoint {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1; 
	string item = 2; // class, member
    int64 object_id = 3; // id của item
    int64 day = 4; 
	Status status = 5;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
	int64 created_at = 6;
	int64 updated_at = 7;
	int64 amount = 8;
	int64 point = 9; // 1 xanh, 2 cam, 3 đỏ
}


message ReportPointRequest {
	int64 id = 1; 
	string item = 2;
    int64 object_id = 3;
    int64 day = 4;
	int64 status = 5;  
	int64 created_at = 6;
	int64 updated_at = 7;
	int64 amount = 8;
	int64 point = 9;
	repeated string cols = 16;
	repeated string includes =17;
	repeated int64 ids = 18;
	repeated int64 object_ids = 19;
	int64 start_at = 20;
	int64 end_at = 21;
	int64 start_day = 22;
	int64 end_day = 23;
}

message ReportPoints {
	repeated ReportPoint report_points = 1;
	int64 total = 2;
}


message ReportToken {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1; 
	string item = 2; // organization, class, member
    int64 object_id = 3; // id của item
    int64 day = 4;
	Status status = 5;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
	int64 created_at = 6;
	int64 updated_at = 7;
	int64 amount = 8;
	int64 token_id = 9;
	enum TransactionType {
		default_transaction_type = 0;
		increase = 1;
		decrease = 2;
	}
	TransactionType transaction_type = 10; // 1 cộng, 2 trừ
}

message ReportTokenRequest {
	int64 id = 1; 
	string item = 2;
	int64 object_id = 3;
	int64 day = 4;
	int32 status = 5;  
	int64 created_at = 6;
	int64 updated_at = 7;
	int64 amount = 8;
	int64 token_id = 9;
	int32 transaction_type = 10;
	repeated string cols = 16;
	repeated string includes =17;
	repeated int64 ids = 18;
	repeated int64 object_ids = 19;
	int64 start_at = 20;
	int64 end_at = 21;
	int64 start_day = 22;
	int64 end_day = 23;
}

message ReportTokens {
	repeated ReportToken report_tokens = 1;
	int64 total = 2;
}




message NewConfig {
	// `gorm:"primaryKey;not null;autoIncrement"`
	int64 id = 1; 
	string item = 2; 
	int64 object_id = 3; // id của item
	int64 answer_id = 4;
	Status status = 5;  
	enum Status {
		  default_state = 0;
		  deactive = 1;
		  active = 2;
	}
	int64 created_at = 6;
}

message NewConfigRequest {
	int64 id = 1; 
	string item = 2; 
	int64 object_id = 3; 
	int64 answer_id = 4;
	int32 status = 5;  
	int32 limit = 17;
	int32 offset = 18;
	repeated string cols = 16;
	repeated string includes =19; 
	repeated int64 ids = 21;
	repeated int64 object_ids = 22;
	repeated int64 answer_ids = 23;
}

message NewConfigs {
	int32 total =1;
	repeated NewConfig new_configs = 2;
}